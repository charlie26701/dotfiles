volume_step=5
brightness_step=10

# get volume
function get_volume {
    pactl get-sink-volume @DEFAULT_SINK@ | grep -Po '[0-9]{1,3}(?=%)' | head -1
}

# mute status
function get_mute {
    pactl get-sink-mute @DEFAULT_SINK@ | grep -Po '(?<=Mute: )(yes|no)' | head -1
}

#get brightness
function get_brightness {
    brightnessctl | grep -Po '[0-9]{1,3}(?=%)' | head -1
}

function get_volume_icon {
    volume=`get_volume`
    mute=`get_mute`
    if [ $volume -eq 0 ] || [ $mute == "yes" ] ; then
        volume_icon="󰖁"
    elif [ $volume -le 30 ]; then
        volume_icon=""
    elif [ $volume -lt 70 ] && [ $volume -gt 30 ]; then
        volume_icon="󰕾"
    else
        volume_icon=""
    fi
}

function get_brightness_icon {
    brightness_icon="󰃠"
}

function show_volume_notif {
    volume=`get_volume`
    get_volume_icon
    if [ $volume -eq 0 ] || [ $mute == "yes" ] ; then
        dunstify -i audio-volume-muted-blocking -t 1000 -r 2593 -u normal "$volume_icon  Muted"
    else
        dunstify -i audio-volume-muted-blocking -t 1000 -r 2593 -u normal "$volume_icon  Volume: $volume%" -h int:value:$volume
    fi
}

# Displays a brightness notification using dunstify
function show_brightness_notif {
    brightness=`get_brightness`
    get_brightness_icon
    dunstify -i audio-volume-muted-blocking -t 1000 -r 2593 -u normal "$brightness_icon  Brightness: $brightness%" -h int:value:$brightness
}

case $1 in
    volume_up)
    pactl set-sink-mute @DEFAULT_SINK@ 0
    pactl set-sink-volume @DEFAULT_SINK@ +$volume_step%
    show_volume_notif
    ;;

    volume_down)
    pactl set-sink-volume @DEFAULT_SINK@ -$volume_step%
    show_volume_notif
    ;;

    volume_mute)
    pactl set-sink-mute @DEFAULT_SINK@ toggle
    show_volume_notif
    ;;

    brightness_up)
    brightnessctl s +$brightness_step%
    show_brightness_notif
    ;;

    brightness_down)
    brightnessctl s $brightness_step%-
    show_brightness_notif
    ;;
esac
